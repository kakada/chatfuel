
- if @messages.count.zero?
  %p there is no message
- else
  = render partial: "shared/page_header", locals: { title: "All messages", link: nil }

  %table.table.table-striped
    %thead
      %tr
        %th{:scope => "col"} Session id
        %th{:scope => "col"} Type
        - Variable.where.not(name: 'done').pluck(:name).uniq.each do |header|
          %th{:scope => "col"}= header.titleize

    %tbody
      - @messages.each do |message|
        %tr
          %td= message.session_id
          %td= message.type
          - Variable.where.not(name: 'done').pluck(:name).uniq.each do |var|
            %td
              - message.steps.each do |step|
                = valueize(step.value) if var.downcase != "done" && var == step.act
  != pagy_bootstrap_nav(@pagy)
