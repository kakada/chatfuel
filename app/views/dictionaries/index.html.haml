= render "shared/page_header", title: "Dictionary", link: link_to_new('dictionary')

%div
  %ul.dict-list
    - @variables.select('name').distinct.each_with_index do |v, index|
      %li.dict-item{ 'data-name': v.name, class: toggle_class_name('active', index.zero?) }
        = link_to v.name.titleize, '#'
        .arrow-shape.arrow-shape__top
        .arrow-shape.arrow-shape__bottom

  .result-map
    - @variables.select('name').distinct.each_with_index do |v, index|
      %table.table{ class: "dict-item-#{v.name} #{ toggle_class_name('d-none', !index.zero?) }" }
        %tr
          %th Value
          %th Text
          %th Action
        - @variables.order(value: :asc).each do |sub|
          - if sub.name == v.name
            %tr
              %td{ colspan: 3 }
                = simple_form_for sub, url: dictionary_path(sub), html: { class: 'form-inline'}, remote: true do |f|
                  = f.input :value, input_html: { id: "variable_value_#{sub.id}", class: 'mr-sm-2' }, readonly: true, label: false
                  = f.input :text, input_html: { name: 'variable[text]', id: "variable_text_#{sub.id}", class: 'mr-sm-2' }, label: false
                  = f.submit 'Update', name: "commit_#{sub.id}", class: 'btn btn-primary'

.clearfix
